language: java
jdk:
  - openjdk8
  - oraclejdk11
  - openjdk11
 
addons:
  apt:
    packages:
      - lynx
      
after_failure:
  - if [ -f /home/travis/build/slothsoft/mp4-spliterator/de.slothsoft.mp4spliterator.it/target/work/configuration/*.log ]; then lynx -dump /home/travis/build/slothsoft/mp4-spliterator/de.slothsoft.mp4spliterator.it/target/work/configuration/*.log; fi
  
# runs "test" goal on default, which misses IT
script:
 - mvn verify -B

# these are for starting and stopping the P2 repo
before_install:
  - mvn -f maven-p2/pom.xml install -Pstart -B
after_script:
  - mvn -f maven-p2/pom.xml package -Pstop -B